<!DOCTYPE html>
<html>
  <head>
    <title>Artists List</title>
  </head>
  <body>
    <header>
      <h1>Welcome to My Music App</h1>
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/artistsList.html">Artists List</a></li>
          <li><a href="/addArtist.html">Add Artist</a></li>

          <li><a href="/userPage.html">My Favorites</a></li>

          <li><a href="/deleteArtist.html">Delete an Artist</a></li>
          <!-- Add more navigation links as needed -->
        </ul>
      </nav>
    </header>
    <h1>Artists List</h1>
    <ul id="artistsList"></ul>

    <script>
      // Fetch artist data and populate the list
      fetch("/artists")
        .then((response) => response.json())
        .then((data) => {
          const artistsList = document.getElementById("artistsList");
          data.forEach((artist) => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `
              <strong>${artist.name}</strong> - ${artist.genre}<br>
              Birthdate: ${artist.birthdate}<br>
              Active Since: ${artist.activeSince}<br>
              Genres: ${artist.genres}<br>
              Labels: ${artist.labels}<br>
              Website: <a class="website" href="${artist.website}" target="_blank">${artist.website}</a><br>
              Short Description: ${artist.shortDescription}<br>
              <button class="addFavorite">Add to favorites</button>
            `;
            artistsList.appendChild(listItem);
          });

          // Add event listeners to favorite buttons
          const addFavoriteButtons = document.querySelectorAll(".addFavorite");
          addFavoriteButtons.forEach((button) => {
            button.addEventListener("click", async (event) => {
              const artistName = event.target
                .closest("li")
                .querySelector("strong").textContent;

              // Send a request to the server to add artist as favorite
              const response = await fetch(
                `/addFavorite/${encodeURIComponent(artistName)}`,
                {
                  method: "POST",
                  // Include authentication headers or tokens if needed
                }
              );

              if (response.status === 200) {
                console.log("Artist added to favorites!");
                // Optionally, you can update UI to indicate the artist was added as a favorite
              } else {
                alert("Error adding artist to favorites");
              }
            });
          });
        })
        .catch((error) => console.error(error));
    </script>
  </body>
</html>
